{% extends "base.html" %}

{% block title %}User Information{% endblock %}

{% block content %}
<div class="page-content" style="background-image: url('images/wizard-v2-bg.jpg')">
  <div class="wizard-v2-content">
    <div class="wizard-image">
    </div>
    <div class="wizard-form">
      <div class="wizard-header">
        <h3>Form Wizard</h3>
        <p>Nostrud exercitation commodo consequat.</p>
      </div>
      <form class="form-register" method="post">
        {% csrf_token %}
        <div id="form-total">
            <h2>1</h2>
            <section>
                <div class="inner">
                    <div class="form-row">
                        <div class="form-holder form-holder-2">
                            <select name="user" id="location" class="form-control">
                                <option value="" disabled selected>Choose a user</option>
                                {% for user in users %}
                                <option value="{{ user.id }}">{{ user.username }}</option>
                                {% endfor %}
                            </select>
                            <span class="select-btn">
                                <i class="zmdi zmdi-chevron-down"></i>
                            </span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-holder">
                            <input name="nombre" type="text" placeholder="First Name" class="form-control" id="first_name">
                        </div>
                        <div class="form-holder">
                            <input name="apellido" type="text" placeholder="Last Name" class="form-control" id="last_name">
                        </div>
                    </div>
                </div>
            </section>
    
            <h2>2</h2>
            <section>
                <div class="inner">
                    <div class="form-row">
                        <div class="form-holder form-holder-2">
                            <input name="telefono" type="number" placeholder="Phone" class="form-control" id="phone">
                        </div>
                    </div>
                </div>
            </section>
    
            <h2>3</h2>
            <section>
                <div class="inner">
                    <div class="form-row table-responsive">
                        
                    </div>
                </div>
                <button type="submit">Enviar</button>
            </section>
        </div>
    </form>

    <input type="text" id="place_input" placeholder="Ingresa una direccion...">
    <div id="map"></div>

    <style>
        #map{
            height: 100%;
        }
        #place_input{
            width: 100%;
            height: 30px;
            border-radius: 0;
            border: none;
            font-size: 15px;
        }
    </style>
    </div>
  </div>
</div>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvxLuk3t7Ks_NDKiQH7I3xu6WncJa7kXA&libraries=places&callback=initMap"></script>
    <script>
        const nicCoords = { lat: 13.0000000, lng: -85.0000000 };
        const mapDiv = document.getElementById("map");
        const input = document.getElementById("place_input");
        let map;
        let marker;
        let autocomplete;

        function initMap(){
            map = new google.maps.Map(mapDiv, {
                center: nicCoords,
                zoom: 4,
            });
            marker = new google.maps.Marker({
                position: nicCoords,
                map: map,
            });
            initAutocomplete();
        }

        function initAutocomplete(){
            autocomplete = new google.maps.places.Autocomplete(input)
            autocomplete.addListener('place_changed', function(){
                const place = autocomplete.getPlace();
                map.setCenter(place.geometry.location);
                marker.setPosition(place.geometry.location);
            });
        }
    </script>
{% endblock %}